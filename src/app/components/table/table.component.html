<ng-container *ngIf="layout === 'list';else grid">
  <app-table-header [totalElements]="data['total_elements']" [filters]="filters"
                    [searchControl]="searchControl" [actions]="actions" (handleAction)="getActionIndex($event)"></app-table-header>
  <form [formGroup]="tableForm" class="overflow-x-auto min-h-96">
    <table class="w-full text-sm text-left rtl:text-right text-gray-500">
      <thead class="text-xs text-gray-700 uppercase bg-gray-50">
      <tr>

        <th scope="col" class="p-4" *ngIf="multiSelect">
          <div class="flex items-center">
            <input id="checkbox-all-search" [formControl]="selectAllCheckbox" type="checkbox"
                   class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-1 cursor-pointer"
                   (click)="checkAll()">
            <label for="checkbox-all-search" class="sr-only">checkbox</label>
          </div>
        </th>
        <td class="px-6 py-7" *ngFor="let column of columns;">
          {{column.value}}
        </td>
        <td class="px-6 py-7">Action</td>
      </tr>
      </thead>
      <tbody formArrayName="checkboxes">
      <tr *ngIf="data['items'].length === 0">
        <td [colSpan]="columns.length">Record not found</td>
      </tr>
      <tr class="bg-white hover:bg-gray-50" tuiDropdownContext [tuiDropdown]="contextMenu"
          *ngFor="let item of data['items'];let i = index;" #dropdown="tuiDropdown">
        <ng-template #contextMenu>
          <tui-data-list
            role="menu"
            tuiDataListDropdownManager
            class="context-menu"
          >
            <button
              *ngFor="let menuItem of menuItems"
              tuiOption
              (click)="handleContextMenu(menuItem.title, item);dropdown.toggle(false)"
            >
              {{ menuItem.title }}
              <tui-svg
                class="icon"
                [src]="menuItem['iconName']"
              ></tui-svg>
            </button>
          </tui-data-list>
        </ng-template>
        <td class="w-4 p-4" *ngIf="multiSelect">
          <div class="flex items-center">
            <input id="checkbox-table-search-1" [formControlName]="i" type="checkbox"
                   class="cursor-pointer w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2">
            <label for="checkbox-table-search-1" class="sr-only">checkbox</label>
          </div>
        </td>
        <ng-container *ngFor="let column of columns;let i = index;">
          <td scope="row" class="flex items-center px-4 py-4 text-gray-900 whitespace-nowrap"
              *ngIf="column.key === 'image';else notImage;">
            <img class="w-10 h-10 rounded-full" src="./assets/image/logo.png" alt="Jese image">
          </td>

          <ng-template #notImage>
            <ng-container *ngIf="column.key === 'is_paid';else text;">
              <td *ngIf="item[column.key];else failed;" class="px-6 py-4">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                     stroke="currentColor" class="size-6 text-green-500">
                  <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
                </svg>
              </td>
              <ng-template #failed>
                <td class="px-6 py-4">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                       stroke="currentColor" class="size-6 text-red-500">
                    <path stroke-linecap="round" stroke-linejoin="round"
                          d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
                  </svg>
                </td>
              </ng-template>
            </ng-container>
            <ng-template #text>
              <td class="px-6 py-4">
                {{item[column.key]}}
              </td>
            </ng-template>
          </ng-template>
        </ng-container>
        <td>
          <button data-tooltip-target="view-tooltip" type="button" class="me-2" *ngIf="enableInfo" (click)="openInfoDialog(item)">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                 stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round"
                    d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"/>
            </svg>
          </button>
          <div id="view-tooltip" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700">
            View
            <div class="tooltip-arrow" data-popper-arrow></div>
          </div>
          <button data-tooltip-target="edit-tooltip" type="button" class="me-2" *ngIf="enableEdit" (click)="openEditDialog(item)">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
            </svg>

          </button>
          <div id="edit-tooltip" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700">
            View
            <div class="tooltip-arrow" data-popper-arrow></div>
          </div>

          <button data-tooltip-target="cancel-tooltip" type="button" class="me-2" *ngIf="enableCancel" (click)="handleCancel(item)">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                 stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round"
                    d="M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"/>
            </svg>
          </button>
          <div id="cancel-tooltip" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700">
            Cancel
            <div class="tooltip-arrow" data-popper-arrow></div>
          </div>
          <button data-tooltip-target="complete-tooltip" type="button" class="me-2" *ngIf="enableComplete" (click)="handleComplete(item)">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                 stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round"
                    d="M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12"/>
            </svg>
          </button>
          <div id="complete-tooltip" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700">
            Complete
            <div class="tooltip-arrow" data-popper-arrow></div>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </form>

</ng-container>

<ng-template #grid>
  <div class="row p-5" *ngIf="data['items'];else loading;">
    <div class="row shadow bg-white rounded p-3 m-3" *ngIf="data['items'].length === 0">
      <p>No product is found</p>
    </div>
    <div class="row justify-content-center mb-3" *ngFor="let data of data['items'];let i = index;">
      <div class="col-md-12 col-xl-10">
        <div class="card shadow-0 border rounded-3">
          <div class="card-body">
            <div class="row">
              <div class="col-md-12 col-lg-3 col-xl-3 mb-4 mb-lg-0">
                <div class="bg-image hover-zoom ripple rounded ripple-surface">
                  <img src="https://mdbcdn.b-cdn.net/img/Photos/Horizontal/E-commerce/new/img(5).webp"
                       class="w-100"/>
                  <a href="#!">
                    <div class="hover-overlay">
                      <div class="mask" style="background-color: rgba(253, 253, 253, 0.15);"></div>
                    </div>
                  </a>
                </div>
              </div>
              <div class="col-md-6 col-lg-6 col-xl-6">
                <h3>{{data.name}}</h3>
                <h5>Description</h5>
                <p class="text-truncate mb-4 mb-md-0">
                  {{data.description}}
                </p>
              </div>
              <div class="col-md-6 col-lg-3 col-xl-3 border-sm-start-none border-start">
                <div class="d-flex flex-row align-items-center mb-1">
                  <h4 class="mb-1 me-1">{{data.price | currency : 'MYR'}}</h4>
                  <!--                                <span class="text-danger"><s>$25.99</s></span>-->
                </div>
                <!--                    <h6 class="text-success">Free shipping</h6>-->
                <div class="d-flex flex-column mt-4 gap-3">
                  <!--                      <button mat-flat-button  color="primary" type="button" [routerLink]="['/product-details',data.id]" (click)="viewProduct(data.id)">View Details</button>-->
                  <!--                      <button  mat-stroked-button color="primary" type="button">-->
                  <!--                        Add to wishlist-->
                  <!--                      </button>-->
                </div>
              </div>
            </div>A
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #loading>

</ng-template>
